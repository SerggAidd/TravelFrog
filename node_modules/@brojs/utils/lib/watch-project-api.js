import chalk from 'chalk';
import watch from 'recursive-watch';

import {safeConnectApi} from './safe-connect-api.js';

let watchId = null;

export const watchProjectApi = (app, location) => {
    const watchApi = () => {
        clearTimeout(watchId);
        watchId = setTimeout(() => {
            safeConnectApi(app, location);
            console.log(chalk.bgGreen.black(' üîÑ API –æ–±–Ω–æ–≤–ª–µ–Ω '), chalk.green.bold('‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã!'));
        }, 200);
    }

    safeConnectApi(app, location);
    watch(location, watchApi);
}
