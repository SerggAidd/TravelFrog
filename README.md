# Budget Compass –Ω–∞ BroJS

–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø–æ–µ–∑–¥–æ–∫ —Å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏, –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–Ω—ã–π –ø–æ–¥ BroJS. –í–µ—Å—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏ dev API —Å–æ–±—Ä–∞–Ω—ã –≤ –æ–¥–Ω–æ–º –ø–∞–∫–µ—Ç–µ, –ø–æ—ç—Ç–æ–º—É –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–¥–Ω–æ–≥–æ dev-—Å–µ—Ä–≤–µ—Ä–∞.

## üöÄ –ó–∞–ø—É—Å–∫

```bash
npm install
npm run dev
# –∏–ª–∏
./start-app.sh
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é dev-—Å–µ—Ä–≤–µ—Ä —Å—Ç–∞—Ä—Ç—É–µ—Ç –Ω–∞ `http://localhost:4000`. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –ø—É—Ç–∏ `/<–∏–º—è-–ø–∞–∫–µ—Ç–∞>` ‚Äî –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å–±–æ—Ä–∫–∏ —ç—Ç–æ `http://localhost:4000/budget-compass`.

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

| –°–ª–æ–π | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|------------|----------|
| UI | React 19 + React Router 7 + TypeScript | MFE, —Å–æ–±–∏—Ä–∞–µ–º—ã–π —á–µ—Ä–µ–∑ BroJS webpack-config |
| –°–æ—Å—Ç–æ—è–Ω–∏–µ | React Context (Auth + Budget) | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ |
| API | Express Router (stubs/api) | In-memory –º–æ–¥–µ–ª–∏, JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, TravelBot –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–æ–≤–µ—Ç–æ–≤ |
| –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ | BroJS CLI + fire.app | –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, SystemJS-–∑–∞–≥—Ä—É–∑–∫–∞ micro-frontend |

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞:

```
.
‚îú‚îÄ‚îÄ bro.config.js          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è BroJS (entry, API, –Ω–∞–≤–∏–≥–∞—Ü–∏–∏)
‚îú‚îÄ‚îÄ src/                   # React-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ context/
‚îÇ   ‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ types.ts
‚îú‚îÄ‚îÄ stubs/api/             # Express-router —Å in-memory –º–æ–¥–µ–ª—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îî‚îÄ‚îÄ services/
‚îî‚îÄ‚îÄ start-app.sh           # –û–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ `npm run dev`
```

## üì° API (dev stubs)

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|----------|
| `GET /api/cities` | –°–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤ |
| `GET /api/cities/search` | –ü–æ–¥–±–æ—Ä –ø–æ –±—é–¥–∂–µ—Ç—É –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è–º |
| `GET /api/cities/:id` | –î–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –≥–æ—Ä–æ–¥–∞ |
| `GET /api/trips` | –°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –ø–æ–µ–∑–¥–∫–∏ (–æ–±—â–∏–π —Å–ø–∏—Å–æ–∫) |
| `POST /api/trips` | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–µ–∑–¥–∫–∏ (—Ç—Ä–µ–±—É–µ—Ç JWT) |
| `DELETE /api/trips/:id` | –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–µ–∑–¥–∫–∏ (—Ç—Ä–µ–±—É–µ—Ç JWT) |
| `GET /api/currencies/rates` | –¢–µ–∫—É—â–∏–µ mock-–∫—É—Ä—Å—ã |
| `GET /api/currencies/convert` | –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å—É–º–º—ã |
| `POST /api/travelbot/ask` | –û—Ç–≤–µ—Ç —Å–æ–≤–µ—Ç—á–∏–∫–∞ |
| `POST /api/travelbot/rebalance` | –ü–µ—Ä–µ—Å—á—ë—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –±—é–¥–∂–µ—Ç–∞ |
| `POST /api/auth/register` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `POST /api/auth/login` | –õ–æ–≥–∏–Ω, –≤—ã–¥–∞—á–∞ JWT |
| `GET /api/auth/profile` | –ü—Ä–æ—Ñ–∏–ª—å (–ø–æ JWT) |

### –ü—Ä–∏–º–µ—Ä—ã

```bash
# –ü–æ–∏—Å–∫ –≥–æ—Ä–æ–¥–∞
curl "http://localhost:4000/api/cities/search?budget=1200&startDate=2024-06-01&endDate=2024-06-07"

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–µ–∑–¥–∫–∏ (–Ω—É–∂–µ–Ω Bearer —Ç–æ–∫–µ–Ω)
curl -X POST http://localhost:4000/api/trips \
  -H "Authorization: Bearer <TOKEN>" \
  -H "Content-Type: application/json" \
  -d '{ "cityId": "lisbon", "params": { "budget": 1200, "origin": "–ú–æ—Å–∫–≤–∞" }, "adjustedBudget": { "flights": 40, "lodging": 30, "food": 15, "local": 10, "buffer": 5 }, "total": 1200 }'
```

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ü–æ–¥–±–æ—Ä –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π —Å —É—á—ë—Ç–æ–º –±—é–¥–∂–µ—Ç–∞ –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π (–∫—É–ª—å—Ç—É—Ä–∞, –ø—Ä–∏—Ä–æ–¥–∞, –Ω–æ—á–Ω–∞—è –∂–∏–∑–Ω—å)
- –ù–∞–≥–ª—è–¥–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å–ª–∞–π–¥–µ—Ä—ã
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ (Leaflet) –∏ –∫–∞—Ä—Ç–æ—á–∫–∏ –≥–æ—Ä–æ–¥–æ–≤
- TravelBot —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Å–æ–≤–µ—Ç–æ–≤ –∏ –∞–≤—Ç–æ-–≤–æ–ø—Ä–æ—Å–∞–º–∏ –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –±—é–¥–∂–µ—Ç–∞
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–ª–æ–∫–∞–ª—å–Ω—ã–π JWT + fallback –≤ localStorage)
- –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –≤–∞–ª—é—Ç —Å mock-–∫—É—Ä—Å–∞–º–∏

## ‚öôÔ∏è –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –°–∫—Ä–∏–ø—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|--------|------------|
| `npm run dev` | BroJS dev server (UI + API) |
| `npm run build` | –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞ MFE |
| `npm run typecheck` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ —á–µ—Ä–µ–∑ `tsc --noEmit` |

## üìÑ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

–ü–æ–¥—Ä–æ–±–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É BroJS-–≤–µ—Ä—Å–∏–∏, —Å—Ö–µ–º—ã –∏ —á–µ–∫-–ª–∏—Å—Ç —Å–º. –≤ `docs/brojs.md`.
